<div class="d-flex justify-content-center p-2">
    <div class="btn-popup pull-left">
        <input [(ngModel)]="searchName" class="form-control" type="text" placeholder="Tìm kiếm"
            (change)="searchProduct()" />
    </div>
</div>

<div class="container-fluid" *ngIf="products.length > 0">
    <div class="btn-popup pull-left">
        <div class="row products-admin ratio_asos">
            <div class="col-xl-3 col-sm-6" *ngFor="let product of products">
                <div class="card">
                    <div class="card-body product-box">
                        <div class="img-wrapper">
                            <div class="lable-block"><span class="lable3" *ngIf="product.discountPercent > 0">{{
                                    product.discountPercent}}%</span>
                                <!-- <span class="lable4" *ngIf="product.discountPercent > 0">on sale</span> -->
                            </div>
                            <div class="front">
                                <a href="javascript:void(0)">
                                    <img [src]="[product.images[0].imageUrl]" class="img-fluid blur-up lazyload bg-img"
                                        alt=""></a>
                                <div class="product-hover">
                                    <ul>
                                        <li>
                                            <button class="btn" type="button" data-original-title="" title=""><i
                                                    class="fa fa-eye"
                                                    [routerLink]="['/products', 'product-detail', product.id]"></i></button>
                                        </li>
                                        <li>
                                            <button class="btn" type="button" data-original-title="" title=""><i
                                                    class="icon-pencil-alt"
                                                    [routerLink]="['/products', 'edit-product', product.id]"></i></button>
                                        </li>
                                        <li>
                                            <button class="btn" type="button" data-toggle="modal"
                                                (click)="openModal(confirm_Delete, product.id)"
                                                data-target="#exampleModalCenter" data-original-title="" title=""><i
                                                    class="icon-trash"></i></button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div *ngIf="product.averageRating > 0" class="rating">Đánh giá : {{ product.averageRating
                                }}
                            </div>
                            <div *ngIf="product.averageRating == 0" class="rating"><a style="color: lightcoral;">Chưa có
                                    đánh
                                    giá</a></div>
                            <a href="javascript:void(0)">
                                <h6>{{product.name}}</h6>
                            </a>
                            <h4>{{product.cost - product.cost * product.discountPercent / 100}}
                                <del *ngIf="product.discountPercent > 0">{{product.cost}}</del>
                            </h4>
                            <!--                         <ul class="color-variant">-->
                            <!--                            <li class="bg-light0"></li>-->
                            <!--                            <li class="bg-light1"></li>-->
                            <!--                            <li class="bg-light2"></li>-->
                            <!--                        </ul>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center p-2">
            <ngb-pagination [collectionSize]="theTotalElements" [(page)]="thePageNumber" [maxSize]="5"
                [pageSize]="thePageSize" [rotate]="true" [boundaryLinks]="true" (pageChange)="listProduct()">
            </ngb-pagination>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <select class="form-select" style="width: auto" name="pageSize" (change)="listProduct()"
                [(ngModel)]="thePageSize">
                <option [value]="12" [selected]="true" [ngValue]="12">12 sản phẩm / trang</option>
                <option [ngValue]="20">20 sản phẩm / trang</option>
                <option [ngValue]="28">28 sản phẩm / trang</option>
            </select>
        </div>
    </div>
</div>

<div class="container-fluid" *ngIf="products.length == 0">
    <div class="d-flex justify-content-center p-2">
        <h4 style="color: lightcoral;">Không có sản phẩm <i class="fa fa-exclamation" aria-hidden="true"></i></h4>
    </div>
</div>

<!-- Confirm Delete -->
<ng-template #confirm_Delete>
    <div class="modal-body text-center">
        <p>Bạn chắc chắc xoá sản phẩm này chứ ?</p>
        <button type="button" class="btn btn-default" (click)="confirm(deleteProductId, success)">Có
        </button>
        <button type="button" class="btn btn-primary" (click)="decline()">Không
        </button>
    </div>
</ng-template>

<!--Delete success -->
<ng-template #success>
    <div class="modal-body text-center">
        <p>Xoá sản phẩm thành công</p>
        <button type="button" class="btn btn-primary" (click)="successDelete()">Tiếp tục
        </button>
    </div>
</ng-template>